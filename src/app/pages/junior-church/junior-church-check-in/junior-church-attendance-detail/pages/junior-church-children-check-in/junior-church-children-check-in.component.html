<ng-container *ngIf="!loading; else pageLoader">
  <ik-header title="Children Check In">
    <ik-header-back (back)="onBackClick()"></ik-header-back>
    <button
      *featureAccess="[
        Application.JUNIOR_CHURCH,
        FeatureType.OVERVIEW,
        Access.CREATE
      ]"
      (click)="onNewChild()"
      class="btn btn-primary btn-flat btn-header-right"
    >
      <ik-icon icon="circle-plus" classOverride="btn-icon"></ik-icon>
      New Child
    </button>
  </ik-header>

  <ik-grid
    #childrenCheckInGrid
    [dataLoader]="childrenDataloader"
    (rowClick)="onRowClick($event)"
  >
    <ik-grid-search></ik-grid-search>
    <ik-grid-column label="Name" field="name">
      <ng-template let-data>
        {{ data | formatUserName }}
      </ng-template>
    </ik-grid-column>
    <ik-grid-column label="CUID" field="cuid"></ik-grid-column>
    <ik-grid-pager key="Children" [pageSize]="10"></ik-grid-pager>
  </ik-grid>
</ng-container>

<app-check-in-child-modal
  [recordId]="recordId"
  (checkInComplete)="refreshGrid()"
></app-check-in-child-modal>

<ng-template #pageLoader>
  <ik-loading type="double"></ik-loading>
</ng-template>
