<ik-header title="Junior Church Check In">
  <button
    *featureAccess="[Application.JUNIOR_CHURCH, FeatureType.CHECK_IN, Access.CREATE]"
    (click)="onNewAttendanceRecord()"
    class="btn btn-primary header-button"
  >
    <ik-icon icon="circle-plus" classOverride="btn-icon"></ik-icon>
    New Attendance
  </button>
</ik-header>

<app-attendance-record-grid
  [dataloader]="dataloader"
  [downloadEnabled]="true"
  [downloadLoading]="downloadLoading"
  (rowClick)="onRowClick($event)"
  (downloadClick)="juniorChurchScheduleDownloadModal.open()"
></app-attendance-record-grid>

<ik-modal #juniorChurchScheduleDownloadModal name="juniorChurchScheduleDownloadModal">
  <ik-modal-header title="Download Junior Church Schedule" type="info"></ik-modal-header>
  <ik-modal-body>
    <form *ngIf="downloadForm" [formGroup]="downloadForm">
      <ik-form-field header="Start Date*"
        ><input type="date" class="form-input__normal" placeholder="Start Date" formControlName="startDate" />
      </ik-form-field>
      <ik-form-field header="End Date*"
        ><input
          type="date"
          class="form-input__normal"
          placeholder="End Date"
          formControlName="endDate"
          [min]="downloadForm.value.startDate"
        />
      </ik-form-field>
    </form>
  </ik-modal-body>
  <ik-modal-action-bar>
    <button
      class="btn btn-primary btn-right btn-modal"
      (click)="onJuniorChurchDownloadClick()"
      [disabled]="downloadForm && downloadForm.invalid"
    >
      Download
    </button>
    <button class="btn btn-default btn-right btn-modal" (click)="juniorChurchScheduleDownloadModal.close()">
      Cancel
    </button>
  </ik-modal-action-bar>
</ik-modal>
