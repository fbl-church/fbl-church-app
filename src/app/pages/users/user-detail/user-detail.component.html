<ng-container *ngIf="!loading; else pageLoader">
  <ik-header title="{{ userData | formatUserName }}">
    <ik-header-back (back)="onBackClick()"></ik-header-back>

    <ng-container *ngIf="canEditUser" ngProjectAs="button">
      <button
        class="btn btn-default header-button"
        (click)="resetPasswordModal.open()"
        *featureAccess="[Application.USERS, FeatureType.DETAIL, Access.UPDATE]"
      >
        <ik-icon icon="rotate" classOverride="btn-icon"></ik-icon>
        Reset Password
      </button>
      <button
        class="btn btn-danger header-button"
        (click)="deleteUserModal.modal.open()"
        *featureAccess="[Application.USERS, FeatureType.DETAIL, Access.DELETE]"
      >
        <ik-icon icon="trash-can" classOverride="btn-icon"></ik-icon>
        Delete
      </button>
    </ng-container>
  </ik-header>

  <!-- Change to use Bootstrap row and column -->

  <div class="row">
    <ik-card-new class="col-lg-6">
      <ik-card-header-new title="Personal Information"></ik-card-header-new>
      <div class="row">
        <ik-card-info
          class="col-md-6"
          header="Name"
          text="{{ userData | formatUserName }}"
          [padding]="false"
        ></ik-card-info>

        <ik-card-info
          class="col-md-6"
          header="Email"
          [text]="userData?.email ? userData.email : '-'"
          [padding]="false"
        ></ik-card-info>
      </div>
      <div class="row">
        <ik-card-info
          class="col-md-6"
          [contentColor]="userData?.accountStatus"
          header="Account"
          [text]="userData?.accountStatus"
          [padding]="false"
        ></ik-card-info>

        <ik-card-info
          class="col-md-6"
          [contentColor]="userData?.appAccess ? 'ACTIVE' : 'INACTIVE'"
          header="Access"
          [text]="userData?.appAccess ? 'GRANTED' : 'DENIED'"
          [padding]="false"
        ></ik-card-info>
      </div>
      <div class="row">
        <ik-card-info
          class="col-md-6"
          header="Created Date"
          [text]="userData?.insertDate | date : 'MMMM d, y'"
          [padding]="false"
        >
        </ik-card-info>
        <ik-card-info
          *webRoleRestrictionAccess="WebRole.ADMINISTRATOR"
          class="col-md-6"
          header="Last Login"
          [text]="userData?.lastLoginDate | date : 'MMMM d, y, h:mm a'"
          [padding]="false"
        ></ik-card-info>
      </div>
    </ik-card-new>
  </div>
  <!-- <button mat-flat-button class="btn-mat" disabled>
    <mat-icon>cached</mat-icon>
    Reset Password
  </button> -->
  <!-- <div class="layout__column-left layout__wide"></div>
  <div class="layout__column-right layout__narrow">
    <app-user-roles-card [user]="userData">
      <ng-container *ngIf="canEditUser && canEditRoles">
        <ik-icon
          title="Edit"
          icon="pen-to-square"
          class="right pointer"
          (click)="onEditClick()"
          *featureAccess="[Application.USERS, FeatureType.DETAIL, Access.UPDATE]"
        ></ik-icon>
      </ng-container>
    </app-user-roles-card>
  </div> -->
</ng-container>

<app-delete-user-modal #deleteUserModal [userId]="userData?.id"></app-delete-user-modal>
<app-reset-password-modal
  #resetPasswordModal
  [userId]="userData?.id"
  [email]="userData?.email"
></app-reset-password-modal>

<ng-template #pageLoader>
  <ik-loading type="double"></ik-loading>
</ng-template>
