<ng-container *ngIf="!loading; else loader">
  <ik-header
    [title]="
      (feature.app | titlecase) + ' (' + (feature.feature | titlecase) + ')'
    "
  >
    <ik-header-back (back)="onBackClick()"></ik-header-back>
  </ik-header>

  <div class="layout__column-left layout__narrow">
    <ik-card>
      <ik-card-header title="Details"> </ik-card-header>
      <div class="flex">
        <div class="left-column">
          <ik-card-info
            header="App"
            [text]="feature.app | titlecase"
          ></ik-card-info>
        </div>
        <div class="right-column">
          <ik-card-info
            header="Feature"
            [text]="feature.feature | titlecase"
          ></ik-card-info>
        </div>
      </div>

      <div class="flex">
        <div class="left-column">
          <ik-card-info
            header="Insert Date"
            [text]="feature.insertDate | date : 'MMMM d, y'"
          ></ik-card-info>
        </div>
      </div>
    </ik-card>
  </div>
  <div class="layout__column-right layout__wide">
    <ik-grid
      #webRoleFeaturesGrid
      [dataLoader]="webRoleFeaturesDataloader"
      [overflowEnabled]="true"
      (rowClick)="onRowClick($event)"
    >
      <ik-card-header title="Web Role Features"></ik-card-header>
      <ik-grid-column label="Role" field="formattedWebRole"> </ik-grid-column>
      <ik-grid-column label="Create" field="create">
        <ng-template let-data>
          <ik-icon
            [icon]="data.create ? 'check' : 'xmark'"
            [classOverride]="data.create ? 'icon__success' : 'icon__danger'"
          ></ik-icon>
        </ng-template>
      </ik-grid-column>
      <ik-grid-column label="Read" field="create">
        <ng-template let-data>
          <ik-icon
            [icon]="data.read ? 'check' : 'xmark'"
            [classOverride]="data.read ? 'icon__success' : 'icon__danger'"
          ></ik-icon>
        </ng-template>
      </ik-grid-column>
      <ik-grid-column label="Update" field="create">
        <ng-template let-data>
          <ik-icon
            [icon]="data.update ? 'check' : 'xmark'"
            [classOverride]="data.update ? 'icon__success' : 'icon__danger'"
          ></ik-icon>
        </ng-template>
      </ik-grid-column>
      <ik-grid-column label="Delete" field="create">
        <ng-template let-data>
          <ik-icon
            [icon]="data.delete ? 'check' : 'xmark'"
            [classOverride]="data.delete ? 'icon__success' : 'icon__danger'"
          ></ik-icon>
        </ng-template>
      </ik-grid-column>
      <ik-grid-pager key="Web Role Features" [pageSize]="5"></ik-grid-pager>
    </ik-grid>
  </div>
</ng-container>

<app-web-role-feature-update-modal
  (webRoleFeatureUpdate)="onWebRoleFeatureUpdated()"
></app-web-role-feature-update-modal>

<ng-template #loader>
  <ik-loading></ik-loading>
</ng-template>
